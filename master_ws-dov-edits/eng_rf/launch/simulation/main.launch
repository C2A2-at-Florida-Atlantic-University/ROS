<launch>
    <!-- Global agrs and params 
    <param name="/use_sim_time" value="true"/>-->

    <!-- Gazebo World -->
    <include file="$(find gazebo_ros)/launch/empty_world.launch">
        <arg name="world_name"      value="$(find eng_rf)/worlds/RF_world.world"/>
		<!-- $(find turtlebot3_gazebo)/worlds/empty.world $(find eng_rf)/worlds/RF_world.world -->
        <arg name="paused"          value="false"/>
        <arg name="use_sim_time"    value="true"/>
        <arg name="gui"             value="true"/>
        <arg name="headless"        value="false"/>
        <arg name="debug"           value="false"/>
    </include> 

    <!-- Robot Spawner -->
    <include file="$(find eng_rf)/launch/simulation/spawner.launch"/>
    
    <!-- Map Merge -->
    <node   pkg="multirobot_map_merge"
            type="map_merge"
            name="map_merge"
            respawn="false"
            output="screen">
        <param name="robot_map_topic"       value="map"/>
        <param name="known_init_poses"      value="true"/>
        <param name="merged_map_topic"      value="map"/>
        <param name="world_frame"           value="map"/>
        <param name="merging_rate"          value="0.5"/>
        <param name="discovery_rate"        value="0.05"/>
        <param name="estimation_rate"       value="0.1"/>
        <param name="estimation_confidence" value="1.0"/>
    </node> 

    <!-- Map Position -->
    <node   pkg="tf"
            type="static_transform_publisher"
            name="burger_tf_broadcaster"
            args="0 0 0 0 0 0 /map /burger/map 100"/>
    <node   pkg="tf"
            type="static_transform_publisher"
            name="waffle_pi_tf_broadcaster"
            args="0 0 0 0 0 0 /map /waffle_pi/map 100"/> 
	
    <!-- Launch Rviz -->
    <node   pkg="rviz"
            type="rviz"
            name="rviz"
            args="-d $(find eng_rf)/rviz/main.rviz" />
	
	<!-- Marker Publisher -->
    <node	pkg="markers_rf"
			name="markers_node_sub"
			type="basic_shapes"/>
</launch>