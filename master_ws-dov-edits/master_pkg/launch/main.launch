<launch>
    <!-- Global agrs and params -->
    <param name="/use_sim_time" value="true"/>
    
    <!-- Robot caller -->
    <include file="$(find master_pkg)/launch/spawner.launch"/>
    
    <!-- Map Merge -->
    <node   pkg="multirobot_map_merge"
            type="map_merge"
            name="map_merge"
            respawn="false"
            output="screen">
        <param name="robot_map_topic"       value="map"/>
        <param name="known_init_poses"      value="false"/>
        <param name="merged_map_topic"      value="map"/>
        <param name="world_frame"           value="map"/>
        <param name="merging_rate"          value="0.5"/>
        <param name="discovery_rate"        value="0.05"/>
        <param name="estimation_rate"       value="0.1"/>
        <param name="estimation_confidence" value="1.0"/>
    </node> 
    <node   pkg="rviz"
            type="rviz"
            name="rviz"
            args="-d $(find master_pkg)/rviz/main_rviz.rviz" />
    <!-- Map frame -->
    <node   pkg="map_server"
            type="map_server"
            name="map_server"
            args="$(find master_pkg)/map/house_map.yaml" >
        <param name="frame_id" value="/map_frame" />
    </node>
    <!-- Map Position -->
    <node   pkg="tf"
            type="static_transform_publisher"
            name="robot1_tf_broadcaster"
            args="0 0 0 0 0 0 /map_frame /burger/odom 100"/>
    <node   pkg="tf"
            type="static_transform_publisher"
            name="robot2_tf_broadcaster"
            args="0 0 0 0 0 0 /map_frame /waffle_pi/odom 100"/>
    
</launch>